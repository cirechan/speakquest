@import "tailwindcss";

/* === Design Tokens === */
:root {
  --color-primary: #2563eb;
  --color-primary-hover: #1d4ed8;
  --color-primary-light: #dbeafe;
  --color-secondary: #06b6d4;
  --color-accent: #f97316;
  --color-success: #16a34a;
  --color-success-light: #dcfce7;
  --color-warning: #f59e0b;
  --color-warning-light: #fef3c7;
  --color-error: #dc2626;
  --color-error-light: #fee2e2;

  --color-bg: #f8fafc;
  --color-bg-card: #ffffff;
  --color-bg-sidebar: #0f172a;
  --color-bg-nav: #ffffff;

  --color-text: #0f172a;
  --color-text-secondary: #475569;
  --color-text-muted: #94a3b8;
  --color-text-inverse: #ffffff;

  --color-border: #e2e8f0;
  --color-border-focus: #2563eb;

  --shadow-sm: 0 1px 3px rgb(15 23 42 / 0.04), 0 1px 2px rgb(15 23 42 / 0.06);
  --shadow-md: 0 4px 6px -1px rgb(15 23 42 / 0.08), 0 2px 4px -2px rgb(15 23 42 / 0.05);
  --shadow-lg: 0 10px 15px -3px rgb(15 23 42 / 0.08), 0 4px 6px -4px rgb(15 23 42 / 0.03);

  --transition-speed: 200ms;
  --transition-ease: cubic-bezier(0.4, 0, 0.2, 1);

  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 16px;
  --radius-full: 9999px;

  --rarity-common: #9ca3af;
  --rarity-rare: #3b82f6;
  --rarity-epic: #a855f7;
  --rarity-legendary: #f59e0b;

  /* Typography scale - kid-friendly sizes */
  --text-xs: 0.8125rem;   /* 13px - minimum for labels */
  --text-sm: 0.9375rem;   /* 15px - secondary text */
  --text-base: 1.0625rem; /* 17px - body text */
  --text-lg: 1.1875rem;   /* 19px - emphasis */
  --text-xl: 1.375rem;    /* 22px - section titles */
  --text-2xl: 1.625rem;   /* 26px - page titles */
  --text-3xl: 2rem;       /* 32px - hero */
}

@theme inline {
  --color-background: var(--color-bg);
  --color-foreground: var(--color-text);
  --color-primary: var(--color-primary);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

/* === TEA: Calm Mode === */
[data-sensory="calm"] {
  --color-primary: #7eb8c9;
  --color-primary-hover: #6ba8b9;
  --color-primary-light: #e8f4f8;
  --color-success: #8bc99b;
  --color-success-light: #e8f5ec;
  --color-warning: #d4b87a;
  --color-warning-light: #f5edd8;
  --color-error: #c98b8b;
  --color-error-light: #f5e0e0;
  --color-bg: #f5f0eb;
  --color-bg-card: #faf7f3;
  --color-text: #4a4a4a;
  --color-text-secondary: #6b6b6b;
  --color-text-muted: #8a8a8a;
  --color-border: #e0d8cf;
  --transition-speed: 500ms;
  --shadow-sm: 0 1px 2px rgb(0 0 0 / 0.03);
  --shadow-md: 0 2px 4px rgb(0 0 0 / 0.05);
  --radius-md: 12px;
  --radius-lg: 20px;
}

/* === TEA: Minimal Mode === */
[data-sensory="minimal"] {
  --color-primary: #6b7280;
  --color-primary-hover: #4b5563;
  --color-primary-light: #f3f4f6;
  --color-success: #6b7280;
  --color-warning: #6b7280;
  --color-error: #9ca3af;
  --color-bg: #ffffff;
  --color-bg-card: #f9fafb;
  --color-text: #374151;
  --color-text-secondary: #6b7280;
  --color-border: #d1d5db;
  --transition-speed: 0ms;
  --shadow-sm: none;
  --shadow-md: none;
  --shadow-lg: none;
  --radius-md: 4px;
  --radius-lg: 8px;
}

/* === High Contrast === */
[data-high-contrast="true"] {
  --color-text: #000000;
  --color-bg: #ffffff;
  --color-bg-card: #ffffff;
  --color-border: #000000;
  --color-primary: #0000cc;
  --color-success: #006600;
  --color-error: #cc0000;
}

/* === Text Sizes === */
[data-text-size="small"] { font-size: 14px; }
[data-text-size="medium"] { font-size: 16px; }
[data-text-size="large"] { font-size: 18px; }
[data-text-size="xlarge"] { font-size: 20px; }

/* === Reduced Motion === */
[data-reduced-motion="true"],
[data-reduced-motion="true"] * {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

/* Also respect OS-level reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  *:not([data-reduced-motion="false"]) {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Minimal mode: disable all decorative animations */
[data-sensory="minimal"] .animate-flame,
[data-sensory="minimal"] .animate-pulse-subtle,
[data-sensory="minimal"] .animate-bounce-subtle,
[data-sensory="minimal"] .animate-wiggle,
[data-sensory="minimal"] .animate-card-pop {
  animation: none !important;
}

body {
  background: var(--color-bg);
  color: var(--color-text);
  font-family: var(--font-sans, -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif);
  font-size: var(--text-base);
  line-height: 1.6;
  letter-spacing: -0.01em;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* === Typography helpers for kid-friendly headings === */
h1, .text-heading-1 { font-size: var(--text-2xl); font-weight: 800; letter-spacing: -0.02em; line-height: 1.2; }
h2, .text-heading-2 { font-size: var(--text-xl); font-weight: 700; letter-spacing: -0.015em; line-height: 1.25; }
h3, .text-heading-3 { font-size: var(--text-lg); font-weight: 600; letter-spacing: -0.01em; line-height: 1.3; }

/* === Active press effect for all interactive elements === */
button:not(:disabled):active,
a:active,
[role="button"]:active {
  transform: scale(0.97);
  transition: transform 100ms ease;
}

/* === Better focus rings for accessibility === */
:focus-visible {
  outline: 3px solid var(--color-primary);
  outline-offset: 2px;
  border-radius: var(--radius-sm);
}

/* === Scroll to top on nav === */
html { scroll-behavior: smooth; }

/* === Rarity glow effects === */
.rarity-common { border-color: var(--rarity-common); }
.rarity-rare {
  border-color: var(--rarity-rare);
  box-shadow: 0 0 8px var(--rarity-rare);
  animation: rarity-glow-rare 2s ease-in-out infinite;
}
.rarity-epic {
  border-color: var(--rarity-epic);
  box-shadow: 0 0 12px var(--rarity-epic);
  animation: rarity-glow-epic 2s ease-in-out infinite;
}
.rarity-legendary {
  border-color: var(--rarity-legendary);
  box-shadow: 0 0 16px var(--rarity-legendary);
  animation: rarity-glow-legendary 1.5s ease-in-out infinite;
}

@keyframes rarity-glow-rare {
  0%, 100% { box-shadow: 0 0 8px var(--rarity-rare); }
  50% { box-shadow: 0 0 16px 4px var(--rarity-rare); }
}
@keyframes rarity-glow-epic {
  0%, 100% { box-shadow: 0 0 12px var(--rarity-epic); }
  50% { box-shadow: 0 0 24px 6px var(--rarity-epic); }
}
@keyframes rarity-glow-legendary {
  0%, 100% { box-shadow: 0 0 16px var(--rarity-legendary); transform: scale(1); }
  50% { box-shadow: 0 0 32px 8px var(--rarity-legendary); transform: scale(1.02); }
}

/* === XP Bar Fill Animation === */
@keyframes xp-fill {
  from { transform: scaleX(0); }
  to { transform: scaleX(1); }
}
.xp-bar-fill {
  transform-origin: left;
  animation: xp-fill 800ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* === Level Up Glow === */
@keyframes level-up-glow {
  0% { box-shadow: 0 0 0 0 var(--color-primary); transform: scale(1); }
  25% { box-shadow: 0 0 30px 15px var(--color-primary); transform: scale(1.05); }
  50% { box-shadow: 0 0 20px 10px var(--color-warning); transform: scale(1.02); }
  75% { box-shadow: 0 0 30px 15px var(--color-primary); transform: scale(1.05); }
  100% { box-shadow: 0 0 0 0 var(--color-primary); transform: scale(1); }
}
.level-up-animation { animation: level-up-glow 2s ease-in-out; }

/* === Flame Animation (for streak) === */
@keyframes flame-flicker {
  0%, 100% { transform: scale(1) rotate(0deg); }
  25% { transform: scale(1.1) rotate(-3deg); }
  50% { transform: scale(1.15) rotate(2deg); }
  75% { transform: scale(1.05) rotate(-1deg); }
}
.animate-flame {
  animation: flame-flicker 2.5s ease-in-out infinite;
}

/* === Subtle Pulse (for rank badge) === */
@keyframes pulse-subtle {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.85; transform: scale(1.03); }
}
.animate-pulse-subtle {
  animation: pulse-subtle 3s ease-in-out infinite;
}

/* === Bounce Subtle (for active nav) === */
@keyframes bounce-subtle {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-2px); }
}
.animate-bounce-subtle {
  animation: bounce-subtle 2s ease-in-out infinite;
}

/* === Sparkle effect for XP gains === */
@keyframes sparkle {
  0% { opacity: 0; transform: translateY(0) scale(0); }
  30% { opacity: 1; transform: translateY(-10px) scale(1.2); }
  100% { opacity: 0; transform: translateY(-30px) scale(0.5); }
}
.animate-sparkle {
  animation: sparkle 0.8s ease-out forwards;
}

/* === Card hover pop === */
@keyframes card-pop {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}
.animate-card-pop {
  animation: card-pop 0.3s ease-in-out;
}

/* === Slide in from bottom === */
@keyframes slide-up {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
.animate-slide-up {
  animation: slide-up 0.5s ease-out;
}

/* === Gradient shimmer for loading === */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
.animate-shimmer {
  background: linear-gradient(90deg,
    var(--color-border) 25%,
    var(--color-bg) 50%,
    var(--color-border) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
}

/* === Wiggle for attention === */
@keyframes wiggle {
  0%, 100% { transform: rotate(0deg); }
  10% { transform: rotate(-8deg); }
  20% { transform: rotate(8deg); }
  30% { transform: rotate(-5deg); }
  40% { transform: rotate(5deg); }
  50% { transform: rotate(0deg); }
}
.animate-wiggle {
  animation: wiggle 1s ease-in-out;
}

/* === Confetti burst for celebrations === */
@keyframes confetti-1 { to { transform: translate(-20px, -60px) rotate(180deg); opacity: 0; } }
@keyframes confetti-2 { to { transform: translate(20px, -50px) rotate(-180deg); opacity: 0; } }
@keyframes confetti-3 { to { transform: translate(-10px, -70px) rotate(270deg); opacity: 0; } }

::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--color-text-muted); border-radius: var(--radius-full); }

/* Hide scrollbar on horizontal carousels */
.scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
.scrollbar-hide::-webkit-scrollbar { display: none; }
